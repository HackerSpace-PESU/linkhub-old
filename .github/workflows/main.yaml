name: Commit Files to Website Branch

on:
    push:
        branches:
        - main

jobs:
    commit:
        runs-on: ubuntu-latest

        permissions:
            contents: write

        steps:
            - uses: actions/checkout@v3
        
            - name: Set up Python 3.10
              uses: actions/setup-python@v3
              with:
                  python-version: "3.10"

            - name: Generate index.py and styles.css
              run: python tools/generate_files.py
            
            - name: Commit and push changes
              run: |
                git config --global user.name 'SilicoFlare [action]'
                git config --global user.email 'silicoflare@gmail.com'
                git checkout -b website
                git add .
                git commit -m 'Adding new files'
                git push origin website
